"use strict";var p=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var P=(l,a)=>{for(var t in a)p(l,t,{get:a[t],enumerable:!0})},w=(l,a,t,e)=>{if(a&&typeof a=="object"||typeof a=="function")for(let i of C(a))!v.call(l,i)&&i!==t&&p(l,i,{get:()=>a[i],enumerable:!(e=u(a,i))||e.enumerable});return l};var y=l=>w(p({},"__esModule",{value:!0}),l);var $={};P($,{default:()=>x});module.exports=y($);var s=require("obsidian"),F={commands:[]};function T(l){let a=5381;for(let t=0;t<l.length;t++)a=a*33^l.charCodeAt(t);return(a>>>0).toString(16)}var m=class extends s.FuzzySuggestModal{constructor(t,e){super(t);this.onChoose=e,this.setPlaceholder("\uD30C\uC77C \uAC80\uC0C9...")}getItems(){return typeof this.app.vault.getMarkdownFiles=="function"?this.app.vault.getMarkdownFiles():this.app.vault.getFiles().filter(t=>t.path.endsWith(".md"))}getItemText(t){return t.path}onChooseItem(t){this.onChoose(t)}},f=class extends s.Plugin{async onload(){await this.loadSettings(),this.registerAllCommands(),this.addSettingTab(new g(this.app,this))}onunload(){for(let t of this.settings.commands)try{this.app.commands.removeCommand(t.id)}catch{}}async loadSettings(){let t=await this.loadData();this.settings=Object.assign({},F,t)}async saveSettings(){await this.saveData(this.settings)}registerAllCommands(){for(let t of this.settings.commands)this.registerCommandForConfig(t)}registerCommandForConfig(t){let e=t.filePath.split("/").pop()?.replace(/\.md$/,"")||t.filePath,i=t.filePath.substring(0,t.filePath.lastIndexOf("/")),r=`${i?`${i}/${e}`:e} \uC5F4\uAE30`;this.addCommand({id:t.id,name:r,callback:async()=>{let o=this.app.vault.getAbstractFileByPath(t.filePath);if(!o||!(o instanceof s.TFile)){new s.Notice(`\uD30C\uC77C\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4: ${t.filePath}`);return}let c=this.app.workspace.activeLeaf||this.app.workspace.getLeaf();c&&await c.openFile(o)}})}async addCommandForFile(t){if(this.settings.commands.some(c=>c.filePath===t)){new s.Notice("\uC774\uBBF8 \uB4F1\uB85D\uB41C \uD30C\uC77C\uC785\uB2C8\uB2E4");return}let i={id:`quick-open-${T(t)}`,filePath:t};this.settings.commands.push(i),this.registerCommandForConfig(i),await this.saveSettings();let n=t.split("/").pop()?.replace(/\.md$/,"")||t,r=t.substring(0,t.lastIndexOf("/")),o=r?`${r}/${n}`:n;new s.Notice(`\uBA85\uB839 \uCD94\uAC00\uB428: ${o} \uC5F4\uAE30`)}async removeCommandById(t){let e=this.settings.commands.findIndex(c=>c.id===t);if(e===-1)return;let[i]=this.settings.commands.splice(e,1);try{this.app.commands.removeCommand(i.id)}catch{}await this.saveSettings();let n=i.filePath.split("/").pop()?.replace(/\.md$/,"")||i.filePath,r=i.filePath.substring(0,i.filePath.lastIndexOf("/")),o=r?`${r}/${n}`:n;new s.Notice(`\uBA85\uB839 \uC0AD\uC81C\uB428: ${o} \uC5F4\uAE30`)}},g=class extends s.PluginSettingTab{constructor(t,e){super(t,e);this.filterText="";this.listContainer=null;this.plugin=e}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Quick Open Commands"});let e=t.createDiv({cls:"quick-open-search"});new s.SearchComponent(e).setPlaceholder("\uBA85\uB839 \uB610\uB294 \uD30C\uC77C \uAC80\uC0C9...").setValue(this.filterText).onChange(n=>{this.filterText=n,this.updateList()}),new s.Setting(t).addButton(n=>{n.setButtonText("+ \uC0C8 \uBA85\uB839 \uCD94\uAC00").onClick(()=>{let r=new m(this.app,async o=>{await this.plugin.addCommandForFile(o.path),this.display(),r.close()});r.open()})}),this.listContainer=t.createDiv(),this.updateList()}updateList(){if(!this.listContainer)return;this.listContainer.empty();let t=this.plugin.settings.commands.filter(e=>{if(!this.filterText)return!0;let i=this.filterText.toLowerCase();return(e.filePath.split("/").pop()?.replace(/\.md$/,"")||e.filePath).toLowerCase().includes(i)||e.filePath.toLowerCase().includes(i)});if(t.length===0){this.listContainer.createEl("div",{text:"\uD574\uB2F9 \uAC80\uC0C9\uC5B4\uC640 \uC77C\uCE58\uD558\uB294 \uBA85\uB839\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uAC80\uC0C9\uC5B4\uB97C \uBCC0\uACBD\uD574 \uBCF4\uC138\uC694."});return}for(let e of t){let i=e.filePath.split("/").pop()?.replace(/\.md$/,"")||e.filePath,n=e.filePath.substring(0,e.filePath.lastIndexOf("/")),r=n?`${n}/${i}`:i,o=new s.Setting(this.listContainer).setName(`${r} \uC5F4\uAE30`),c=this.app.vault.getAbstractFileByPath(e.filePath);if(!c||!(c instanceof s.TFile)){let d=o.nameEl;d.createEl("span",{text:" \u26A0\uFE0F",attr:{title:"\uD30C\uC77C\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4"}}).style.color="var(--interactive-danger)",o.nameEl.style.color="var(--interactive-danger)"}o.addExtraButton(d=>{d.setIcon("square-arrow-out-up-right").setTooltip("\uC0C8 \uD0ED\uC5D0\uC11C \uC5F4\uAE30").onClick(async()=>{let h=this.app.vault.getAbstractFileByPath(e.filePath);h&&h instanceof s.TFile?await this.app.workspace.getLeaf("tab").openFile(h):new s.Notice("\uD30C\uC77C\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4")})}),o.addExtraButton(d=>{d.setIcon("trash").setTooltip("\uC0AD\uC81C").onClick(async()=>{await this.plugin.removeCommandById(e.id),this.display()})})}}},x=f;
